
<div id="topbar">
  <div id="searchbox">
    <h1 class="searchhdr">Whittle it down a bit</h1>

    <% form_tag coders_path, :method => :get do %>
      <%= text_field_tag :search, params[:search]%>
      <input name="" type="image" src="/images/btn-search.gif" id="search-btn" onclick="this.submit();"/>
    <% end %>
    <div>
      <p class="desc">You can use any of the thinking sphinx boolean search options to whittle the field of ranked rails coders down.  Rank is based on the <%= link_to "workingwithrails.com","http://workingwithrails.com/", :target => "_new" %> ranking
      and a star signifies that the coder has at least one public <%= link_to "github","http://www.github.com/",:target => "_new" %> repo displaying the total number of repo watchers they have.  Github repo authorship is determined by the alias field from the coder's WWR profile.
      </p>
    </div>
  </div><!--search-->
</div>
<div class="graydivide"></div><!--graydivide-->
<div id="main">
  <div id="leftbar">
    <h1><%= pluralize(@count,"coder") %> found</h1>
    
    <%= will_paginate @coders %>

    <% @coders.each_with_index do |coder, index| %>
      <% if coder %>
      
      <div class="<%= alternate_row_color(index) %>">
        <div class="userpic"><%=link_to image_tag(format_image_path(coder.image_path),{:size  => "90x90"}), coder_path(coder) %></div>
        <div class="rank">
          <ul>
            <li class="ranknum">WWR Rank: <%= show_rank(coder) %> <%= show_delta(coder) %></li>
            <li>Recommended by: <%= coder.recommendation_count %></li>
            <% if coder.github_watchers > 0 %>
              <li><img src="/images/star.gif" /> GitHub Watchers: <a href="<%= coder.github_url %>" target="_new"><%= coder.github_watchers %></a></li>
            <% end %>
            <li><%= link_to "Recommend on WWR",recommendation_url(coder), :target => "_new" %></li>
          </ul>
        </div>        
        <!--userpic-->
        <ul class="userinfo">
          <li class="username"><%=h "#{coder.full_name}" %></li>
          <li class="userlocation"><%=h coder.city %><%= ", #{h coder.country}" if coder.country %></li>
          <li class="userlocation"><%=h coder.company_name %></li>
          <li class="userlocation"><%=link_to coder.website, coder.website, :target => "_new" %></li>
          <li class="userlocation">RailsRankings Points: <%= number_with_delimiter(coder.full_rank,{:delimiter => ","}) %></li>
        </ul>
      </div>
      <% end %>
    <% end %>
    
    <div id="results">
    <%= page_entries_info @coders %>
    </div>
    <%= will_paginate @coders,{:id => "pagination"} %>

   </div>
    <!--leftbar-->
    <div id="rightbar">
      <h2>Top Rails Cities</h2>
        <%= render :partial => "city_rankings" %>
      <h2>Top Ranked Companies</h2>
        <%= render :partial => "company_rankings" %>
      <h2>Top Coders</h2>
        <%= render :partial => "top_coders_new_rank" %>
    </div>
    <!--rightbar-->
    <div style="clear:both;"></div>
    <!--clearing div-->
  </div>
  <!--main-->


